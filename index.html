<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Map Clue Utility ðŸŒŽ</title>

<!-- Leaflet CSS -->
<link rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-o9N1j7kP3eVU+R7x3rrhDruK/NpO6H3Of+zY9qfG0wY="
  crossorigin=""
/>

<style>
    body {
        font-family: "Segoe UI", Arial, sans-serif;
        text-align: center;
        background-color: #f7f9fc;
        margin: 0;
        padding: 0;
    }

    h1 {
        color: #2c3e50;
        margin: 20px 0 10px;
        font-size: 1.8em;
    }

    #instruction {
        margin-bottom: 10px;
        color: #555;
        font-size: 1em;
    }

    #map {
        height: 60vh;
        width: 90%;
        max-width: 900px;
        margin: 15px auto;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        transition: all 0.3s ease;
    }

    .clue-box {
        background: #fff;
        border: 2px solid #0078A8;
        border-radius: 10px;
        padding: 15px;
        margin: 10px auto 25px;
        width: 90%;
        max-width: 900px;
        text-align: left;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .clue-box p {
        font-size: 1.1em;
        color: #333;
    }

    @media (max-width: 600px) {
        #map {
            height: 50vh;
        }
        h1 {
            font-size: 1.4em;
        }
    }
</style>
</head>

<body>
    <h1>ðŸŒŽ Drop a Pin, Get a Clue!</h1>
    <div id="instruction">Tap or click anywhere on the map to drop a pin and reveal a clue about the place!</div>
    <div id="map"></div>

    <div class="clue-box">
        <p><b>Clue Result:</b> <span id="clueOutput">Click on the map to begin your adventure!</span></p>
    </div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-QVb9jK0T5PyoUqX70ZJpOZ6RhyAdb7ZK5Bfq4nZ8+3s="
  crossorigin=""></script>

<script>
    // Initialize map centered globally
    const map = L.map('map', {
        worldCopyJump: true,
        zoomControl: true,
        attributionControl: true
    }).setView([0, 0], 2);

    // Load OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
    }).addTo(map);

    let currentMarker = null;

    function generateClue(lat, lng) {
        const latDir = lat >= 0 ? 'North' : 'South';
        const lngDir = lng >= 0 ? 'East' : 'West';
        const latAbs = Math.abs(lat).toFixed(2);
        const lngAbs = Math.abs(lng).toFixed(2);
        let message = "";

        if (lat > 50 && lng < -100) {
            message = "You're far in the <b>Northwest</b> â€” maybe Alaska or Canada!";
        } else if (lat > 35 && lng > -10 && lng < 40) {
            message = "This looks like <b>Europe</b> â€” home to art, history, and amazing landscapes.";
        } else if (lat < -10 && lng > 100) {
            message = "Warm seas await in the <b>Southeast</b> â€” near Australia or Oceania!";
        } else if (lat < -40 && lng < -50) {
            message = "Brrr! The <b>Southwest</b> â€” close to the chilly tip of South America.";
        } else if (Math.abs(lat) < 5 && Math.abs(lng) < 5) {
            message = "You're near the <b>Center of the World</b> â€” the Equator and Prime Meridian!";
        } else {
            message = `Coordinates show <b>${latAbs}Â° ${latDir}</b>, <b>${lngAbs}Â° ${lngDir}</b>.`;
        }

        return `Pin dropped at (${latAbs}Â°, ${lngAbs}Â°). ${message}`;
    }

    function onMapClick(e) {
        const { lat, lng } = e.latlng;
        if (currentMarker) map.removeLayer(currentMarker);

        currentMarker = L.marker([lat, lng]).addTo(map);

        const clue = generateClue(lat, lng);
        document.getElementById("clueOutput").innerHTML = clue;

        currentMarker.bindPopup(`<b>Your Clue:</b><br>${clue}`).openPopup();
    }

    map.on('click', onMapClick);
</script>
</body>
</html>
